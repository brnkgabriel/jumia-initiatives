var Begin=function(t){class e{constructor(t){this.pubsub=feature_box,this.NAME="Jumdle",this.TANDC="Jumdle T & Cs",this.WRONG_SPOT=2,this.RIGHT_SPOT=5,this.NO_OF_LETTERS=6,this.ID="jumdle",this.FOCUS="focus",this.BUILD="build",this.RESET="reset",this.START="start",this.SUBMITTED="submitted",this.UPDATE="update",this.TAB_STATE="tab state",this.LOAD_DATA="load data",this.FROM_INTERVAL="initialized from interval",this.FROM_LOGIN="initialized from login",this.TAB_OFFSET=63,this.TAB_LISTENER="tab listener",this.FIRST_TAB="first tab",this.IN_SESSION="in session",this.AFTER_SESSION="after session",this.BTW_OR_B4_SESSION="between or before session",this.SET_STATE="set state",this.TABS_PER_PAGE=6,this.TIME_SLOTS_TO_DISPLAY=12,this.SKU_X_MARGIN=4,this.time_interval=null,this.minute_duration=parseInt(t.config.minute_duration_solve_win),this.CURRENCY=t.config.currency,this.config=t.config,this.domain=t.domain,this.el=t=>document.querySelector("#initiative "+t),this.all=t=>document.querySelectorAll("#initiative "+t),this.pad=t=>1==t.toString().length?"0"+t:t,this.endTime=t=>t+60*this.minute_duration*1e3,this.isAGroup=t=>0===t.fs_price.length,this.skuRow=t=>this.el('.-sku_row[data-time="'+t+'"]'),this.skuRows=()=>this.all(".-sku_row"),this.tab=t=>this.el('.-tab[data-time="'+t+'"]'),this.live=(t,e)=>t.forEach((t=>t.classList[e]("-live"))),this.skuID=t=>t.name+"-"+ +new Date(t.time),this.capitalize=t=>t[0].toUpperCase()+t.slice(1),this.oosByTime=t=>t.map((t=>this.skuRow(t).classList.add("-oos"))),this.getData=(t,e)=>t.json_list.filter((t=>t[e.key]===e.name)),this.isItMyTime=(t,e)=>+new Date(t.time)===parseInt(e),this.isPast=t=>Date.now()>t&&Date.now()>this.endTime(t),this.isFuture=(t,e)=>-1===e.indexOf(t),this.displayCondition=(t,e)=>e<this.TIME_SLOTS_TO_DISPLAY,this.digit=(t,e)=>0!==parseInt(t)?this.pad(t)+e:"",this.isATab=(t,e)=>t.classList.contains(e),this.midnight=t=>t?new Date(t).setHours(0,0,0,0):(new Date).setHours(0,0,0,0),this.clone=t=>JSON.parse(JSON.stringify(t)),this.arrayList=t=>Array.from(Array(t).keys())}times(t){var e=t.map((t=>+new Date(t.time)));return Array.from(new Set(e)).sort(((t,e)=>t-e))}group(t,e){return e.map((e=>{var s=t.filter((t=>this.isItMyTime(t,e)));return{time:e,skus:s}}))}pastAndFutureTimes(t){var e=t.filter(this.isPast),s=t.filter((t=>this.isFuture(t,e)));return{past:e,future:s}}additionalTimes(t){var e=t.future,s=t.past,i=this.addition(e,s);return e.length<this.TIME_SLOTS_TO_DISPLAY?i:[]}addition(t,e){for(var s=[],i=this.TIME_SLOTS_TO_DISPLAY-t.length;i>-1;i--){var a=e.length-1-i;s.push(e[a])}return s}timeUnits(t){var e=new Date(t);return{day:e.getDay(),month:e.getMonth(),date:e.getDate(),hr:e.getHours(),mn:e.getMinutes()}}twelveHrFormat(t,e){return 12===t?this.pad(t)+":"+this.pad(e)+"pm":t>12?this.pad(t-12)+":"+this.pad(e)+"pm":0===t?"12:"+this.pad(e)+"am":this.pad(t)+":"+this.pad(e)+"am"}dayDiff(t){var e=new Date(t).getDate();return(new Date).getDate()-e}sameMonth(t){return new Date(t).getMonth()===(new Date).getMonth()}date(t){var e=this.dayDiff(t);return 0===e&&this.sameMonth(t)?this.capitalize("today"):1===e&&this.sameMonth(t)?this.capitalize("yesterday"):-1===e&&this.sameMonth(t)?this.capitalize("tomorrow"):this.fullDate(t)}fullDate(t){var e=new Date(t),s=e.toLocaleDateString("en-US",{month:"short"});return e.toLocaleDateString("en-US",{weekday:"short"})+" "+s+" "+e.getDate()}toggleClass(t,e,s){t.forEach((t=>t.classList.remove(s))),e.classList.add(s)}price(t){return t.split("-").map(this.formatPrice.bind(this)).join(" - ")}formatPrice(t){var e="prefix"===this.config.currency_position?this.config.currency+" "+parseInt(t).toLocaleString():parseInt(t).toLocaleString()+" "+this.config.currency;return 0==parseInt(t)?"PRIZE":e}discount(t,e){var s=100*(parseInt(t)-parseInt(e))/parseInt(t);return isNaN(s)?"":"-"+Math.round(s)+"%"}replacePattern(t,e){var s=new RegExp(t,"g");return e.replace(s,"-")}id(t,e){var s=this.replacePattern("'",t),i=this.replacePattern("&",s);return this.replacePattern("%",i).toLowerCase().split(" ").join(e)}badge(t){var e=this.id(t.type,"_"),s=this.config[e+"_icon"],i="Generic"===t.type?"Limited Stock":t.type,a=s?`<img class="lazy-image" data-src="${s}" alt="sku_img"/>`:i;return s?`<div class="-tag -inlineblock -vamiddle -b-img -${this.id(t.type,"-")}">${a}</div>`:`<div class="-tag -inlineblock -vamiddle -${this.id(t.type,"-")}" style="background-color:${this.config[t.type]}">${a}</div>`}platform(){var t="ontouchstart"in window;return{banner:t?this.config[this.ID+"_mobile_banner"]:this.config[this.ID+"_desktop_banner"],live_link:t?this.config[this.ID+"_deeplink"]:this.domain.host+"/"+this.config.download_apps_page}}show(t){return this.image_observer=new feature_box.ImageObserver(t),this.image_observer=null,this}reorder(t){return this.pastAndFutureTimes(t).future.concat(this.pastAndFutureTimes(t).past)}}class s{constructor(t){fetch(atob("aHR0cHM6Ly93d3cuanVtaWEuY29tLm5nL3NwLXdvcmRsZS13b3Jkcy8")).then((t=>t.text())).then((e=>new i(e,t))),new r(t)}}class i extends e{constructor(t,e){super(e),this.ext=this.extract(t),this.matchDict5L12am12pm=this.ext.matchDict5L12am12pm,this.matchDict6L12pm1159pm=this.ext.matchDict6L12pm1159pm,this.wordDict6L=this.ext.wordDict6L,this.matchDict=this.matchDict6L12pm1159pm,this.wordDict=this.wordDict6L,this.numWords=this.matchDict.length,this.wordLength=6,this.maxGuesses=6,this.guessAttempt=0,this.pts=0,this.alphabet=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],this.keyboardLayout=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["enter","z","x","c","v","b","n","m","delete"]],this.keyboard=this.createKeyboard(),this.keyboardElement=document.getElementById("keyboard"),this.keyboardElement.appendChild(this.keyboard.element),this.gameEl=document.getElementById("game"),this.newGameButton=document.getElementById("newGameButton"),this.status=document.querySelector(".-timer-score"),this.initialize()}initialize(){this.theGame=this.Game(),this.theGame.startGame(),this.newGameButton.addEventListener("click",(t=>{this.theGame.startGame(),t.target.blur()}))}extract(t){var e=t.indexOf("<pre>")+5,s=t.indexOf("</pre>"),i=t.substring(e,s);return JSON.parse(i)}getRandomWord(){const t=Math.floor(this.numWords*Math.random());return this.matchDict[t]}Tile(){const t=document.createElement("div");t.classList.add("tile-container");const e=document.createElement("div");e.classList.add("tile"),t.appendChild(e);let s="",i="tbd";const a={correct:function(){e.classList.add("correct")},oop:function(){e.classList.add("oop")},wrong:function(){e.classList.add("wrong")}};return{element:t,get:function(){return s},set:function(t){e.innerHTML=t,e.classList.add("pop"),setTimeout((()=>{e.classList.remove("pop")}),150),s=t},clear:function(t){e.innerHTML="",s="",e.classList.remove("correct","oop","wrong")},setState:function(t){i=t,a[i]&&a[i]()},getState:function(){return i}}}createGuessRow(){let t=this;const e=document.createElement("div");e.classList.add("guess");let s=0,i=[];for(var a=0;a<t.wordLength;a++){const t=this.Tile();e.appendChild(t.element),i.push(t)}return{element:e,tiles:i,appendLetter:function(e){s>=t.wordLength||(i[s].set(e),s++)},deleteLetter:function(){s<=0||(s--,i[s].clear())},getWord:function(){return i.reduce(((t,e)=>t+=e.get()),"")},clear:function(){i.forEach((t=>t.clear())),s=0}}}createGameBoard(){const t=document.createElement("div");t.classList.add("board");let e=[];for(let s=0;s<this.maxGuesses;s++){const s=this.createGuessRow();t.appendChild(s.element),e.push(s)}return{element:t,guesses:e,clear:function(){e.forEach((t=>t.clear()))}}}createKey(t,e){const s=document.createElement("button");s.classList.add("key"),s.dataset.value=t,s.innerHTML=t.toUpperCase(),s.addEventListener("click",e);let i="tbd";const a={correct:function(){n(),s.classList.add("correct")},oop:function(){n(),s.classList.add("oop")},wrong:function(){n(),s.classList.add("wrong")}};function n(){s.classList.remove("correct","oop","wrong")}return{letter:t,element:s,setState:function(t){i=t,a[i]&&a[i]()},getState:function(){return i},clear:n}}createKeyboardRow(t,e){const s=document.createElement("div");s.classList.add("keyboard-row");const i={};return t.forEach((t=>{const a=this.createKey(t,e);i[t]=a,s.appendChild(a.element)})),{element:s,keys:i}}createKeyboard(){const t=document.createElement("div");t.classList.add("keyboard");const e={};let s;function i(t){s&&s(t.srcElement)}return this.keyboardLayout.forEach((s=>{const a=this.createKeyboardRow(s,i);t.appendChild(a.element),Object.assign(e,a.keys)})),{element:t,keyMap:e,addClickCallback:function(t){t&&"function"==typeof t&&(s=t)},removeClickCallback:function(){s=void 0},clear:function(){Object.keys(e).forEach((t=>e[t].clear()))}}}MessageDisplay(){const t=document.createElement("div");t.classList.add("message","hide");const e=document.createElement("h4");e.classList.add("text"),e.innerHTML="MESSAGE TEST",t.appendChild(e);let s=!1;function i(){t.classList.remove("show"),t.classList.add("hide"),s=!1}return{element:t,show:function(a){s||a&&"string"==typeof a&&(e.innerHTML=a,t.classList.remove("hide"),t.classList.add("show"),s=!0,setTimeout(i,1e3))}}}updateScore(t){this.pts+=t}Game(){var t=this;const e=this.createGameBoard();function s(){const t=e.guesses,s=t.length-1;let i=-1,a=t[i];return{next:function(){return i>=s?{value:void 0,done:!0}:(i++,a=t[i],{value:a,done:!1})}}}let i,a,n="";const r=document.getElementById("game-container");r.appendChild(e.element);const o=this.MessageDisplay();function h(){a.value&&a.value.deleteLetter()}function d(){var e=`<div class="-remaining -st">Pts (${t.pts})</div><div class="-st">:</div><div class="-elapsed -st">Atp (${t.guessAttempt})</div><div class="-st">:</div><div class="-elapsed -st">Sco (${u()})</div>`;t.status.innerHTML=e}r.appendChild(o.element);const c={correct:0,oop:1,wrong:2,tbd:3};function l(e,s){const i=t.keyboard.keyMap[e].getState();c[s]>=c[i]||t.keyboard.keyMap[e].setState(s)}function u(){var e=(t.pts/t.guessAttempt).toFixed(2);return parseFloat(e)}function m(){t.keyboard.removeClickCallback(),window.removeEventListener("keydown",g)}let p={delete:h,backspace:h,enter:function(){const e=a.value.getWord();if(e.length!==t.wordLength)return void o.show(`You need ${t.wordLength} letters`);if(!t.wordDict.includes(e)&&!t.matchDict.includes(e))return void o.show("Invalid Word");if(t.guessAttempt+=1,!function(){let e,s,i,r=[...n],o=0;e=r.reduce(((t,e)=>t[e]?(t[e]++,t):(t[e]=1,t)),{});const h=[];return a.value.tiles.forEach(((a,n)=>{if(i=a.get(),s=r[n],i===s)return t.updateScore(t.RIGHT_SPOT),a.setState("correct"),l(i,"correct"),e[i]--,void o++;h.push(a)})),h.forEach(((a,n)=>{if(i=a.get(),s=r[n],e[i]>0)return t.updateScore(t.WRONG_SPOT),a.setState("oop"),l(i,"oop"),void e[i]--;a.setState("wrong"),l(i,"wrong")})),o===t.wordLength}())return a=function(e){!0===(e=i.next()).done&&(o.show(`Correct Word = ${n.toUpperCase()}<br/>YOUR SCORE HAS BEEN SUBMITTED`),feature_box.emit(t.UPDATE,{attempt:t.guessAttempt,pts:t.pts,score:u()}));return e}(a),void d();feature_box.emit(t.UPDATE,{attempt:t.guessAttempt,pts:t.pts,score:u()}),o.show("YAY, CONGRATS!<br/>YOUR SCORE HAS BEEN SUBMITTED"),d(),m()},guess:t=>{var e;e=t,a.value&&e&&"string"==typeof e&&a.value.appendLetter(e)}};function g(t){v(t.key)}function b(t){v(t.dataset.value)}function v(e){if(t.alphabet.includes(e))return void p.guess(e);const s=e.toLowerCase();p[s]&&p[s]()}return{startGame:function(){t.guessAttempt=0,t.pts=0,e.clear(),m(),t.keyboard.clear(),i=new s,a=i.next(),n=t.getRandomWord(),t.keyboard.addClickCallback(b),window.addEventListener("keydown",g)},giveUp:function(){o.show(n.toUpperCase())}}}}class a extends e{constructor(t){super(t),this.pageCount=t=>Math.ceil(t.length/this.entries_p_page),this.act=(t,e)=>this.el('.-score-row[data-id="'+t.email+'"]').classList[e]("-hide"),this.numOrOne=t=>t||1,this.maxEntry=t=>t.length<this.entries_p_page?t.length:this.entries_p_page,this.pageHTML=t=>`<span class="-page" data-page="${t+1}">${t+1}</span>`,this.initialize(),this.pages_el=this.el(".-pagination .-pages"),this.search_el=this.el(".-scores .-search"),this.score_list=this.el(".-score-list"),this.info_el=this.el(".-table-info"),this.no_entries_el=this.el(".-no-entries"),this.select_epp_el=this.el(".-entries-per-page select"),this.search_el.addEventListener("keyup",this.filter.bind(this)),this.pages_el.addEventListener("click",this.goTo.bind(this)),this.select_epp_el.addEventListener("change",this.changeEntries.bind(this))}changeEntries(t){this.entries_p_page=parseInt(t.target.value),this.show(this.to_display,1)}initialize(){this.entries_p_page=10,this.to_display=[],this.data=[]}goTo(t){var e=t.target;if(e.classList.contains("-page")){var s=Number(e.getAttribute("data-page"));this.show(this.to_display,s)}}show(t,e){this.data.map((t=>this.act(t,"add"))),t.map(((t,s)=>this.displaySubset(t,s,e))),this.updateStatus(t,e)}displaySubset(t,e,s){var i=this.entryRange(s);e+1>=i.min&&e+1<=i.max&&this.act(t,"remove")}entryRange(t){return{min:1+t*this.entries_p_page-this.entries_p_page,max:t*this.entries_p_page}}updateStatus(t,e){var s=this.pageCount(t);this.pages_el.innerHTML=this.arrayList(s).map(this.pageHTML.bind(this)).join("");var i=this.entryRange(e),a=i.min,n=i.max>t.length?t.length:i.max;this.info_el.innerHTML=`Showing ${this.numOrOne(a)} - ${this.numOrOne(n)} of ${this.numOrOne(t.length)}`;var r=this.no_entries_el.classList;t.length>0?r.add("-hide"):r.remove("-hide")}filter(t){var e=t.target.value.toLowerCase();this.to_display=this.clone(this.data).filter((t=>this.condition(t,e))),this.show(this.to_display,1)}condition(t,e){var s=new Date(t.timestamp);return-1!==t.firstName.toLowerCase().indexOf(e)||-1!==t.email.toLowerCase().indexOf(e)||-1!==t.attempt.toString().toLowerCase().indexOf(e)||-1!==t.position.toString().toLowerCase().indexOf(e)||-1!==s.toDateString().toLowerCase().indexOf(e)||-1!==s.toLocaleTimeString().toLowerCase().indexOf(e)}build(t){this.data=t,this.to_display=t,this.score_list.innerHTML=this.to_display.map(this.rowHTML.bind(this)).join(""),this.show(this.to_display,1)}rowHTML(t,e){return`<div class="-score-row -hide" data-id="${t.email}"><div data-pos="${t.position}" class="-score-col -color"></div><div class="-score-col -pos">${t.position}</div><div class="-score-col -name">${t.firstName}</div><div class="-score-col -tme">${t.score}</div><div class="-score-col -date"><div class="-date-string">${new Date(t.timestamp).toDateString()}</div><div class="-time-string">${new Date(t.timestamp).toLocaleTimeString()}</div></div></div>`}}class n extends e{constructor(t){super(t),this.comingTimes=()=>this.times().filter((t=>this.timeElapsedSinceMidnight()<t)),this.timeElapsedSinceMidnight=()=>new Date-new Date(this.midnight()),this.nextTime=()=>+new Date(this.midnight())+this.comingTimes()[0],this.initializeClock=t=>this.time_interval=setInterval((()=>this.toUpdateClock(t)),1e3),this.minuteToMillisecs=t=>60*t*1e3,this.clock_el=this.el("#clock"),feature_box.subscribe(this.TAB_STATE,this.startOrStopCycle.bind(this)),this.reset()}startOrStopCycle(t){"scores"===t?this.initializeClock(this.nextTime()):this.reset()}reset(){this.minutes_in_a_day=1440,this.minutes_in_ms=6e4,this.interval_btw_fetches_mins=10,clearInterval(this.time_interval)}toUpdateClock(t){var e=this.remainingTime(t);e.t<=0&&(this.reset(),setTimeout((()=>{feature_box.emit(this.LOAD_DATA,this.FROM_INTERVAL),this.initializeClock(this.nextTime())}),1e3)),this.clock_el.innerHTML=`${("0"+e.minutes).slice(-2)}m : ${("0"+e.seconds).slice(-2)}s`}remainingTime(t){var e=+new Date(t)-+new Date,s=Math.floor(e/1e3%60),i=Math.floor(e/1e3/60%60),a=Math.floor(e/36e5%24);return{t:e,days:Math.floor(e/864e5),hours:a,minutes:i,seconds:s}}times(){var t=Math.round(this.minutes_in_a_day/this.interval_btw_fetches_mins);return this.arrayList(t).map((t=>{var e=t+1;return(this.interval_btw_fetches_mins*e-this.interval_btw_fetches_mins)*this.minutes_in_ms}))}}class r extends e{constructor(t){super(t),this.cloneSortPosition=t=>this.clone(t).sort(this.doubleSort.bind(this)).map(((t,e)=>Object.assign(t,{position:e+1}))),this.table_controller=new a(t),this.time=new n(t),this.initialize(),this.game_el=this.el(".-game"),this.game_wrap=this.el(".-game-wrap"),this.table=this.el(".-table"),this.user_el=this.el(".-game-tabs-parent .-user"),this.update_time=this.el(".-update-time"),this.everything_loaded=setInterval(this.loginCondition.bind(this),1e3),feature_box.subscribe(this.LOAD_DATA,this.init.bind(this)),feature_box.subscribe(this.UPDATE,this.updateUser.bind(this)),feature_box.subscribe(this.FOCUS,this.rebuildTable.bind(this))}timeData(t,e){return t.filter((t=>{var s=this.midnight(e),i=this.endTime(s);return t.timestamp>=s&&t.timestamp<i}))}rebuildTable(t){if(this.firestore_data){t=parseInt(t);var e=this.timeData(this.firestore_data,t),s=this.cloneSortPosition(e);this.build(s)}}initialize(){this.database=new Database;var t=this.dbTimes().filter((t=>Date.now()>=t.starts&&Date.now()<t.ends))[0];this.db_idx=t.idx,this.started=!1,this.data={"time-to-finish":0},this.user={}}updateUser(t){Object.assign(this.user,t),this.user.timestamp=Date.now();var e={};e[this.user.email]=this.user,this.database.configs.map((t=>{this.database.save(t.firestore,e).then((t=>{feature_box.emit(this.SUBMITTED,{}),feature_box.emit(this.LOAD_DATA,{})})).catch((t=>{}))}))}loginCondition(){var t=this.game_wrap.classList;if(/loaded|complete/.test(document.readyState)){clearInterval(this.everything_loaded);var e=store.customer.email;this.user={email:e,firstName:store.headerInfo.customer.firstName,timestamp:Date.now()},e.length>0?this.login(t):t.remove("-loggedin")}}login(t){t.add("-loggedin"),this.init(this.FROM_LOGIN)}storeData(t){return this.firestore_data=t.filter((t=>parseFloat(t.score)>0)),this.firestore_data}dbTimes(){var t=this.time.minutes_in_a_day/this.database.configs.length,e=t;return this.database.configs.map(((s,i)=>{var a=t+(i-1)*e,n=t+(i+1-1)*e,r=this.midnight(),o=Math.round(r+this.time.minuteToMillisecs(a)),h=Math.round(r+this.time.minuteToMillisecs(n));return{id:s.projectId,starts:o,ends:h,start_time:new Date(o),end_time:new Date(h),idx:i}}))}dbIdx(t){return t===this.FROM_INTERVAL?(this.db_idx++,this.db_idx=this.db_idx>=this.database.configs.length?0:this.db_idx,this.db_idx):this.db_idx}init(t){var e=this.dbIdx(t),s=this.database.configs[e];this.database.get(s.firestore,this.ID).then(this.rows.bind(this)).then(this.storeData.bind(this)).then((t=>this.timeData(t,Date.now()))).then(this.cloneSortPosition.bind(this)).then(this.build.bind(this)).then((t=>this.updateUserStatusUi(t,this.user,this.user_el,"Hi"))).then(this.start.bind(this)).catch((t=>{}))}build(t){return this.table_controller.build(t),t}start(t){var e={data:t,user:this.user};feature_box.emit(this.START,e)}rows(t){var e=new Date(Date.now());return this.update_time.innerHTML=e.toDateString()+" "+e.toLocaleTimeString(),Object.keys(t).map((e=>t[e]))}doubleSort(t,e){return parseFloat(t.score)===parseFloat(e.score)?t.timestamp-e.timestamp:parseFloat(e.score)-parseFloat(t.score)}tripleSort(t,e){return e.score===t.score?t.attempt===e.attempt?t.timestamp-e.timestamp:t.attempt-e.attempt:e.score>t.score?1:-1}updateUserStatusUi(t,e,s,i){var a=t.findIndex((t=>t.email===e.email)),n=t.find((t=>t.email===e.email)),r=(a=a>=0?a+1:"-",n?n.score:"-"),o=n?n.attempt:"-",h=n?n.pts:"-";n&&new Date(n.timestamp).toLocaleTimeString();return s.innerHTML=`<div class="-username">${i} (${e.firstName})</div><div class="-stats"><div class="-stat-row">Pts = ${h}, Atp = ${o}</div><div class="-stat-row">Sco = ${r}, Pos = ${a}</div></div>`,t}}class o extends e{constructor(t){super(t),this.tab_bounds={},this.tabs=this.el(".-all-tabs"),this.tabs_parent=this.el(".-tabs"),this.game_tabs=this.el(".-game-tabs"),this.game=this.el(".-game"),feature_box.subscribe(this.BUILD,this.build.bind(this)),this.tabs.addEventListener("click",this.tabListener.bind(this)),this.game_tabs.addEventListener("click",this.gTabListener.bind(this))}reset(){this.tab_bounds={},this.tabs.innerHTML=""}hideControls(t){t.length<8&&this.tabs_parent.classList.add("-hide-controls")}build(t){this.reset();var e=t.reordered_times;this.hideControls(e),this.tabs.innerHTML=e.map(this.createTab.bind(this)).join(""),e.map(this.tabBounds.bind(this));var s=this.all(".-tab")[0];this.setTabProps(s,this.FIRST_TAB),this.show(this.tabs)}tabListener(t){var e=t.target.parentElement;this.isATab(e,"-tab")&&this.setTabProps(e,this.TAB_LISTENER)}gTabListener(t){var e=t.target.parentElement;this.isATab(e,"-g-tab")&&this.assignState(e)}assignState(t){var e=t.getAttribute("data-state");this.game.setAttribute("data-state",e),this.game.setAttribute("style",{game:"height:515px;max-height:unset",scores:"height:110vw;max-height:480px"}[e]),feature_box.emit(this.TAB_STATE,e),this.toggleClass(this.all(".-g-tab"),t,"active")}setTabProps(t,e){this.toggleClass(this.all(".-tab"),t,"active"),e==this.TAB_LISTENER&&feature_box.emit(this.FOCUS,t.getAttribute("data-time"))}tabBounds(t,e){var s=this.el('.-tab[data-time="'+t+'"]');this.tab_bounds[t]=s.getBoundingClientRect()}createTab(t,e){var s=0===e?"-tab active -inlineblock -posrel -vamiddle":"-tab -inlineblock -posrel -vamiddle",i=this.timeUnits(t);return`<div class="${s}" data-time="${t}"><span class="-posabs -preloader -loading"></span><span class="-time">${this.twelveHrFormat(i.hr,i.mn)}</span><span>${this.date(t)}</span></div>`}}class h extends e{constructor(t){super(t),this.row_bounds={},this.skus_el=this.el(".-skus"),this.skuHTML=t=>this.isAGroup(t)?this.groupHTML(t):this.singleHTML(t),this.createSKUs=t=>t.map(this.skuHTML.bind(this)).join(""),feature_box.subscribe(this.FOCUS,this.inFocus.bind(this)),feature_box.subscribe(this.BUILD,this.displayAndListen.bind(this))}reset(){this.row_bounds={},this.skus_el.innerHTML=""}inFocus(t){var e=this.skuRows(),s=this.skuRow(t);this.toggleClass(e,s,"active")}displayAndListen(t){this.reset(),this.skus_el.innerHTML=t.grouped_skus.map(this.rowHTML.bind(this)).join("");var e=this.all(".-sku_row")[0].getAttribute("data-time");this.inFocus(e),feature_box.emit(this.FOCUS,e),this.show(this.skus_el),this.listen()}listen(){this.skus_el.addEventListener("click",(t=>{t.target.classList.contains("-cta")&&window.scroll(0,0)}))}rowHTML(t,e){var s=this.createSKUs(t.skus);return this.createRow(t,e,s)}description(t){var e=!isNaN(t),s=new Intl.NumberFormat("en-US",{style:"currency",currency:"NGN"});return e?s.format(t):t}badge(t){var e=this.id(t.type,"_"),s=this.config[e+"_icon"],i="Generic"===t.type?"Limited Stock":t.type,a=s?`<img class="lazy-image" data-src="${s}" alt="sku_img"/>`:i;return s?`<div class="-tag -inlineblock -vamiddle -b-img -${this.id(t.type,"-")}">${a}</div>`:`<div class="-tag -inlineblock -vamiddle -${this.id(t.type,"-")}" style="background-color:${this.config[t.type]}">${a}</div>`}groupHTML(t){return`<div target="_blank" class="-sku -posrel -${t.status}" id="${this.id(this.skuID(t),"-")}"><a href="${t.pdp}" class="-img -posrel"><span class="-posabs -preloader -loading"></span><div class="-posabs -shadow"><span class="-posabs">sold out</span></div><img class="lazy-image" data-src="${t.image}" alt="sku_img" /></a><div class="-details -posabs"><div class="-name">${t.name.toString()}</div><div class="-prices"><div class="-price -new">${t.fs_discount}</div></div></div><div class="-cta -posabs">guess the word</div><div class="-tags -posabs">${this.badge(t)}</div></div>`}singleHTML(t){var e=this.price(t.barred_price),s=this.price(t.fs_price),i=this.discount(t.barred_price,t.fs_price);return`<div target="_blank" class="-sku -posrel -${t.status}" id="${this.id(this.skuID(t),"-")}"><a href="${t.pdp}" class="-img -posrel"><span class="-posabs -preloader -loading"></span><div class="-posabs -shadow"><span class="-posabs">sold out</span></div><img class="lazy-image loaded" data-src="${t.image}" alt="sku_img" /></a><div class="-details -posabs"><div class="-name">${t.name}</div><div class="-prices"><div class="-price -new">${s}</div><div class="-price -old">${e}</div><div class="-discount">${i}</div></div></div><div class="-cta -posabs">guess the word</div><div class="-tags -posabs">${this.badge(t)}</div></div>`}createRow(t,e,s){return`<div class="${0===e?"-sku_row -posrel active":"-sku_row -posrel"}" data-time="${t.time}">${s}</div>`}}class d extends e{constructor(t){super(t),this.time_el=this.el(".-countdown-row .-time"),this.sessionEnded=t=>t.t<=0||t.session_state===this.AFTER_SESSION,this.amIInSession=t=>Date.now()>=t&&Date.now()<this.endTime(t),this.amIPastSession=t=>Date.now()>this.endTime(t),feature_box.subscribe(this.FOCUS,this.inFocus.bind(this))}inFocus(t){var e=parseInt(t),s=this.endTime(e),i=this.sessionState(e);i===this.IN_SESSION&&this.liveActions(e);var a=i===this.IN_SESSION?s:e;this.initializeClock({session_state:i,time:a}),this.markSoldSKUs()}markSoldSKUs(){var t=Array.from(this.all(".-sku_row")).map((t=>parseInt(t.getAttribute("data-time")))),e=this.pastAndFutureTimes(t).past;this.oosByTime(e)}sessionState(t){var e="",s=this.amIInSession(t),i=this.amIPastSession(t);return e=s?this.IN_SESSION:"",""===(e=i?this.AFTER_SESSION:e)?this.BTW_OR_B4_SESSION:e}liveActions(t){var e=this.skuRow(t),s=this.tab(t),i=this.el('.-g-tab[data-state="game"]');this.live([e,s,i],"add")}initializeClock(t){clearInterval(this.time_interval),this.time_interval=setInterval((()=>this.tick(t)),1e3)}tick(t){var e=this.remainingTime(t);e.session_state=t.session_state,this.sessionEnded(e)&&clearInterval(this.time_interval),this.updateClockUi(e)}updateClockUi(t){var e="";e=t.session_state===this.IN_SESSION?"Ends in ":"",e=t.session_state===this.AFTER_SESSION?"Ended last ":e,e=t.session_state===this.BTW_OR_B4_SESSION?"Starts in ":e;var s=this.digits(t).filter((t=>""!==t)).join(" : ");this.time_el.innerHTML=e+s}remainingTime(t){var e=t.time,s=+new Date(e)-Date.now();s=this.sessionEnded(t)?Date.now()-+new Date(e):s;var i=Math.floor(s/1e3%60),a=Math.floor(s/1e3/60%60),n=Math.floor(s/36e5%24),r=Math.floor(s/864e5);t={t:s,days:r,hours:n,minutes:a,seconds:i};return this.itIsEndTime(t)&&setTimeout((()=>feature_box.emit(this.RESET,"from reset")),3e3),{t:s,days:r,hours:n,minutes:a,seconds:i}}itIsEndTime(t){return 0===t.days&&0===t.hours&&0===t.minutes&&0===t.seconds}digits(t){return t.days>=1?[this.digit(t.days,"d"),this.digit(t.hours,"h"),this.digit(t.minutes,"m")]:[this.digit(t.hours,"h"),this.digit(t.minutes,"m"),this.digit(t.seconds,"s")]}}new class extends e{constructor(t){super(t),this.prizes=this.getData(t,{key:"initiative",name:this.NAME}),this.tandcs=this.getData(t,{key:"type",name:this.TANDC}),this.tandc_el=this.el(".-re.-rules"),this.hiw_cta=this.el(".-how-it-works"),this.top_banner=this.el(".-banner.-top"),this.top_banner.addEventListener("click",this.toggleBanner.bind(this)),this.tabs=new o(t),this.sku_rows=new h(t),this.state=new d(t),this.main=new s(t),feature_box.subscribe(this.RESET,this.init.bind(this)),this.init("from start").setBanner().displayTAndCs()}init(t){var e=this.times(this.prizes),s=this.pastAndFutureTimes(e),i=this.additionalTimes(s).filter((t=>void 0!==t)),a=s.future.concat(i),n=this.group(this.prizes,a);return feature_box.emit(this.BUILD,{reordered_times:a,grouped_skus:n}),this}toggleBanner(){this.top_banner.classList.toggle("-show");var t=this.hiw_cta.querySelector(".-txt");t.textContent="How It Works (T & Cs)"===t.textContent?"Close":"How It Works (T & Cs)"}setBanner(){return this.el(".-banner.-top img.lazy-image").setAttribute("data-src",this.platform().banner),this}displayTAndCs(){return this.tandc_el.innerHTML=this.tandcs.map(this.tandcHTML.bind(this)).join(""),this}tandcHTML(t){return`<div class="-rule_element"><div class="-inlineblock -vatop -num">${t.sku}.</div><div class="-inlineblock -vatop -desc">${t.name}</div></div>`}}(t)};class Database{constructor(){this.regExReplace=t=>t.replace(/\"|\,/g,""),this.clone=t=>JSON.parse(JSON.stringify(t)),this.configs_str=["projectId==jumia-d080c|messagingSenderId==877411630892|apiKey==AIzaSyCUP5ISID9Jh7-lm5R0k-HcOopqt8u-eyk|appId==1:877411630892:web:f7b7a9d6bbcfadb2","projectId==jumia-og|messagingSenderId==502706301371|apiKey==AIzaSyAT9KiJMaEGcMK1F87-eanWtE-z0_-Lw2s|appId==1:502706301371:web:79fea8a63ea2581c567c9e","projectId==jumia-bmtn2|messagingSenderId==875946805177|apiKey==AIzaSyAPvFJ9vtXynxudD9a-D7yhhEl-2rvEctA|appId==1:875946805177:web:a4adeca0b15e6b38","projectId==jumia-br|messagingSenderId==114843399424|apiKey==AIzaSyCg3xSlGNcHzxpHq05HPwN0IpRw5JnKc74|appId==1:114843399424:web:1a5b9cb9aa574f579cefe5","projectId==jumia-stor|messagingSenderId==659989278147|apiKey==AIzaSyB1N3LqxTcLPldBjKkQiiTJR8wy4f7IbJM|appId==1:659989278147:web:25d4693699d8aa0d","projectId==jumia-89cc5|messagingSenderId==650879520928|apiKey==AIzaSyCBK409LGgtZk-RI9VXDQrHe8_FGo9lFeo|appId==1:650879520928:web:a603d1d6a8904b5e","projectId==jumia-brnk|messagingSenderId==632015048847|apiKey==AIzaSyAfQc3JLSluNogTDwiHXy_pLJHmRd3Ufxw|appId==1:632015048847:web:34f74684ef297532"],this.configs=this.configs_str.map(this.strToJSON.bind(this)).map(this.configObj.bind(this)).map(this.firestore.bind(this))}configObj(t){var e=this.clone(t),s=t.projectId+".firebaseapp.com",i="https://"+t.projectId+".firebaseio.com",a=t.projectId+".appspot.com";return Object.assign(e,{authDomain:s,databaseURL:i,storageBucket:a})}firestore(t){var e=firebase.initializeApp(t,t.projectId);return Object.assign(t,{firestore:e.firestore()})}strToJSON(t){return this.regExReplace(t).split("|").reduce(this.reduceProp.bind(this),{})}reduceProp(t,e){var s=e.split("==");return t[s[0]]=s[1]?s[1].toLocaleString():s[1],t}save(t,e){return t.collection("jumdle").doc("data").set(e,{merge:!0})}get(t,e){return t.collection(e).doc("data").get().then((t=>t.exists?t.data():{})).catch((t=>{}))}}var fb_config={apiKey:"AIzaSyAfQc3JLSluNogTDwiHXy_pLJHmRd3Ufxw",authDomain:"jumia-brnk.firebaseapp.com",databaseURL:"https://jumia-brnk.firebaseio.com",projectId:"jumia-brnk",storageBucket:"jumia-brnk.appspot.com",messagingSenderId:"632015048847",appId:"1:632015048847:web:34f74684ef297532"},element_id="app",feature_box=Featurebox({id:"",config:fb_config,element_id:element_id,name:"jumdle"});feature_box.subscribe(feature_box.FETCHED_DATA,Begin);
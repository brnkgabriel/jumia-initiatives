{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://webpack-typescript/./src/core/constants.ts","webpack://webpack-typescript/./src/core/util.ts","webpack://webpack-typescript/./src/core/database.ts","webpack://webpack-typescript/./src/core/skurows.ts","webpack://webpack-typescript/./src/core/tabs.ts","webpack://webpack-typescript/./src/core/controller.ts","webpack://webpack-typescript/./src/index.ts"],"sourcesContent":["import { IDBConfig, IConstants } from \"./interfaces/others\";\r\n\r\nexport const config:IDBConfig = {\r\n  apiKey: \"AIzaSyAA8dQEt-yZnDyY3Lra8lndRJ3LWNYVW0o\",\r\n  authDomain: \"jumia-c15a3.firebaseapp.com\",\r\n  databaseURL: \"https://jumia-c15a3.firebaseio.com\",\r\n  projectId: \"jumia-c15a3\",\r\n  storageBucket: \"jumia-c15a3.appspot.com\",\r\n  messagingSenderId: \"295115190934\",\r\n  appId: \"1:295115190934:web:de0b33b53a514c3c\"\r\n}\r\n\r\nexport const voteDBList: string[] = [\"projectId==jumia-vote-deals|messagingSenderId==15013363201|apiKey==AIzaSyC8htXCQ-5Tm_qCKgbVBQaS_Enu5zQmIeU|appId==1:15013363201:web:d8ed9ec2a4f2f331d50a00\",]\r\n\r\nexport const constants:IConstants = {\r\n  FROM_INTERVAL: \"interval\",\r\n  VOTED_DEALS: \"voted-deals\",\r\n  VOTES_AVAILABLE: \"votes available\",\r\n  SHEETNAME: \"vote_deals_categories\",\r\n  NAME: \"Vote Deals Categories\",\r\n  TANDCS: \"Vote Deals Categories T & Cs\",\r\n  FOCUS: \"focus\",\r\n  BUILD: \"build\",\r\n  GROUPED: \"grouped\",\r\n  RESET: \"reset\",\r\n  TABLISTENER: \"tab listener\",\r\n  INSESSION: \"in session\",\r\n  AFTERSESSION: \"after session\",\r\n  BTWORB4SESSION: \"between or before session\",\r\n  TIMESLOTSTODISPLAY: 12,\r\n  SKUROWQUERY: \".-sku_row\",\r\n  LIVECLASS: \"-live\",\r\n  OOSCLASS: \"-oos\",\r\n  TABCLASS: \"-tab\",\r\n  AM: \"am\",\r\n  PM: \"pm\",\r\n  TODAY: \"today\",\r\n  YESTERDAY: \"yesterday\",\r\n  TOMORROW: \"tomorrow\",\r\n  PREFIX: \"prefix\",\r\n  FREE: \"FREE\",\r\n  INITIATIVE: \"Vote Deals Categories\",\r\n  TANDCSQUERY: \".-re.-rules\",\r\n  HOWITWORKSQUERY: \".-how-it-works\",\r\n  TOPBANNERQUERY: \".-banner.-top\",\r\n  FROMSTART: \"from start\",\r\n  CLICK: \"click\",\r\n\r\n  // Controller class constants\r\n  SHOWCLASS: \"-show\",\r\n  TXTCLASS: \".-txt\",\r\n  CLOSE: \"Close\",\r\n  TERMSANDCONDIIONS: \"Terms & Conditions\",\r\n  BANNERQUERY: \".-banner.-top img.lazy-image\",\r\n  DATASRC: \"data-src\",\r\n\r\n  // Tabs class constants\r\n  TABQUERY: \".-tab\",\r\n  TABSQUERY: \".-all-tabs\",\r\n  TABSPARENTQUERY: \".-tabs\",\r\n  PREVQUERY: \".-control.-prev\",\r\n  NEXTQUERY: \".-control.-next\",\r\n  FIRSTTAB: \"first tab\",\r\n  ACTIVECLASS: \"active\",\r\n  DATACATEGORY: \"data-category\",\r\n  NEXT: \"next\",\r\n  PREV: \"prev\",\r\n\r\n  // SKURows class constants\r\n  SKUSELQUERY: \".-skus\",\r\n  SKUROWCLASS: \"-sku_row -posrel\"\r\n}\r\n\r\nexport const fxn = {\r\n  idQuery: (query: string) => \"#initiative \" + query,\r\n  tabQuery: (category: string) => '.-tab[data-category=\"' + category + '\"]',\r\n  rowQuery: (categoryId: string) => `.-sku_row[data-category=\"${categoryId}\"]`\r\n}","import { IDomain, IRemoteConfig, IRemoteData } from \"./interfaces/config\";\r\nimport { IDBConfig, IPastAndFutureTimes } from \"./interfaces/others\";\r\nimport { constants, fxn } from \"./constants\";\r\nimport { IVoteDeals } from \"./interfaces/data\";\r\n\r\n// type TypeOrNull<T> = T | null;\r\n\r\nexport class Util {\r\n  private remoteData:IRemoteData;\r\n  private timeInterval:number = 0;\r\n  private minutesDuration: number;\r\n  private currency: string;\r\n  private config: IRemoteConfig;\r\n  private domain: IDomain;\r\n  protected el;\r\n  protected all;\r\n  private pad;\r\n  private endTime;\r\n  private skuRow;\r\n  // private skuRows;\r\n  private tab;\r\n  private live;\r\n  private skuID;\r\n  private capitalize;\r\n  // private oosByTime;\r\n  private isPast;\r\n  private isFuture;\r\n  private digit;\r\n  protected isATab;\r\n  private midnight;\r\n  protected fbox;\r\n  protected allCategories;\r\n  protected randomize;\r\n  protected categoryId;\r\n\r\n  constructor(remoteData: IRemoteData, fbox: any) {\r\n    this.remoteData = remoteData\r\n    this.minutesDuration = Number(this.remoteData.config.minute_duration_campaign_calendar)\r\n    this.currency = this.remoteData.config.currency\r\n    this.config = this.remoteData.config\r\n    this.domain = this.remoteData.domain\r\n    this.fbox = fbox\r\n\r\n    this.el = (query: string) => document.querySelector(fxn.idQuery(query)) as HTMLElement\r\n    this.all = (query: string) => document.querySelectorAll(fxn.idQuery(query))\r\n    this.allCategories = (data: IVoteDeals[]) => [...new Set(data.map(datum => datum.category))]\r\n    this.pad = (time: number) => time.toString().length == 1 ? \"0\" + time : time\r\n    this.endTime = (time: number) => time + (this.minutesDuration * 60 * 1000)\r\n    this.randomize = (list: any[]) => list.sort( () => .5 - Math.random() )\r\n    this.skuRow = (category: string) => this.el(fxn.tabQuery(category))\r\n    this.categoryId = (category: string) => `cat-${this.id(category, \"-\")}`\r\n    // this.skuRows = () => this.all(constants.SKUROWQUERY)\r\n    this.tab = (category: string) => this.el(fxn.tabQuery(category))\r\n    this.live = (list: HTMLElement[], action: \"add\" | \"remove\") => list.forEach(each => each.classList[action](constants.LIVECLASS))\r\n    this.skuID = (sku: IVoteDeals) => sku.name + \"-\" + (+new Date(sku.sku))\r\n    this.capitalize = (str: string) => str[0].toUpperCase() + str.slice(1)\r\n    // this.oosByCategory = (category: string[]) => times.map(time => this.skuRow(time)?.classList.add(constants.OOSCLASS))\r\n    this.isPast = (time: number) => Date.now() > time && Date.now() > this.endTime(time)\r\n    this.isFuture = (time: number, past: number[]) => past.indexOf(time) === -1\r\n    this.digit = (num: number, unit: string) => num !== 0 ? this.pad(num) + unit : \"\"\r\n    this.isATab = (el: HTMLElement) => el.classList.contains(constants.TABCLASS) \r\n    this.midnight = (time: number | string) => +new Date(time).setHours(0, 0, 0, 0)\r\n  }\r\n\r\n  getData(initiative: string) {\r\n    const list = this.remoteData.json_list as IVoteDeals[]\r\n    return list.filter((datum) => datum.initiative === initiative)\r\n  }\r\n\r\n  group(data: IVoteDeals[], categories: string[]) {\r\n    const group:Map<string, IVoteDeals[]> = new Map()\r\n\r\n    categories.map(category => {\r\n      const skus = data.filter(datum => datum.category === category)\r\n      const randomized = this.randomize(skus)\r\n      group.set(category, randomized)\r\n      // group.set(category, skus)\r\n    })\r\n    return group\r\n  }\r\n\r\n  pastAndFutureTimes(times: number[]) {\r\n    const past = times.filter(this.isPast)\r\n    const future = times.filter(time => this.isFuture(time, past))\r\n    return { past, future }\r\n  }\r\n\r\n  timeUnits(time: number) {\r\n    const $date = new Date(time)\r\n    const day = $date.getDay()\r\n    const month = $date.getMonth()\r\n    const date = $date.getDate()\r\n    const hour = $date.getHours()\r\n    const mins = $date.getMinutes()\r\n\r\n    return { day, month, date, hour, mins }\r\n  }\r\n  \r\n\r\n  toggle(toRemove: NodeListOf<Element>, toAdd: HTMLElement, className: string) {\r\n    toRemove.forEach(el => el.classList.remove(className))\r\n    toAdd.classList.add(className)\r\n  }\r\n\r\n  price(raw: string) {\r\n    const num = this.numFromStr(raw)\r\n    return `${this.currency} ${Number(num).toLocaleString()}`\r\n  }\r\n\r\n  numFromStr(str: string) {\r\n    return Number(str.replace(/[^0-9\\.]+/g,\"\"))\r\n  }\r\n\r\n  formatPrice(price: string) {\r\n    const formatted = this.config.currency_position === constants.PREFIX\r\n    ? `${this.currency} ${Number(price).toLocaleString()}`\r\n    : `${Number(price).toLocaleString()} ${this.config.currency}`\r\n\r\n    return Number(price) === 0 ? constants.FREE : formatted\r\n  }\r\n\r\n  isANumber(price: string) {\r\n    const pieces = price.split(\" \")\r\n    const num = pieces.filter(piece => !isNaN(Number(piece)))[0]\r\n\r\n    return !isNaN(Number(num)) ? Number(num) : null\r\n  }\r\n\r\n  discount($old: string, $new: string) {\r\n    const oldP = this.isANumber($old)\r\n    const newP = this.isANumber($new)\r\n    if (!isNaN(Number(oldP))) {\r\n      var diff = Number(oldP) - Number(newP)\r\n      var ratio = (diff * 100) / Number(oldP)\r\n      return !isNaN(ratio) ? \"-\" + Math.round(ratio) + \"%\" : \"\";\r\n    }\r\n    return null\r\n  } \r\n\r\n  // continue from replace pattern\r\n  replacePattern(pattern: string | RegExp, str: string) {\r\n    const re = new RegExp(pattern, \"g\")\r\n    return str.replace(re, \"-\")\r\n  }\r\n\r\n  id(name: string, delim: string) {\r\n    const replaceApostrophe = this.replacePattern(\"'\", name)\r\n    const replaceAmpersand = this.replacePattern(\"&\", replaceApostrophe)\r\n    const replacePercent = this.replacePattern(\"%\", replaceAmpersand)\r\n    return replacePercent.toLowerCase().split(\" \").join(delim)\r\n  }\r\n\r\n  key(keyStr: string, obj: IRemoteConfig) {\r\n    type KeyType = keyof typeof obj\r\n    return keyStr as KeyType\r\n  }\r\n\r\n  dbConfigKey(keyStr: string, obj: IDBConfig) {\r\n    type keyType = keyof typeof obj\r\n    return keyStr as KeyType\r\n  }\r\n\r\n  show() {\r\n    let imageObserver = new this.fbox.ImageObserver()\r\n    imageObserver = null\r\n    return this\r\n  }\r\n\r\n  platform() {\r\n    const isMobile = 'ontouchstart' in window\r\n    const mBannerStr = constants.SHEETNAME + \"_mobile_banner\"\r\n    const dBannerStr = constants.SHEETNAME + \"_desktop_banner\"\r\n    const deeplinkStr = constants.SHEETNAME + \"_deeplink\"\r\n\r\n    const mBannerKey = this.key(mBannerStr, this.config)\r\n    const dBannerKey = this.key(dBannerStr, this.config)\r\n    const deeplinkKey = this.key(deeplinkStr, this.config)\r\n\r\n    const mBanner = this.config[mBannerKey]\r\n    const dBanner = this.config[dBannerKey]\r\n    const deeplink = this.config[deeplinkKey]\r\n\r\n    const banner = isMobile ? mBanner : dBanner\r\n    const lvlink = isMobile ? deeplink : (`${this.domain.host}/${this.config.download_apps_page}`)\r\n    \r\n    return { banner, live_link: lvlink }\r\n  }\r\n}","import { constants, voteDBList } from './constants';\r\nimport { IRemoteData, ISendable } from './interfaces/config';\r\nimport { IDBConfig, IFirestoreConfig, IPartialDBConfig, IOptions } from './interfaces/others';\r\nimport { Util } from './util';\r\n\r\nexport class Database extends Util {\r\n  private voteDBList \r\n  private send\r\n  private configs: IFirestoreConfig[]\r\n  private FLStore: any\r\n  private TLStore: any\r\n  private $dbIdx: number = 0\r\n  private user: any\r\n\r\n  constructor(remoteData: IRemoteData, fbox:any, private options: IOptions) {\r\n    super(remoteData, fbox)\r\n    // voteDBList replaces this.configStr\r\n    this.voteDBList = voteDBList\r\n    this.send = (data:ISendable) => this.fbox.pubsub.emit(constants.VOTES_AVAILABLE, data)\r\n    this.FLStore = (key: string, useIfNull: object) => JSON.parse(options.localStorage.getItem(key)) || useIfNull\r\n    this.TLStore = (key: string, item: any) => options.localStorage.setItem(key, JSON.stringify(item))\r\n\r\n    this.configs = this.voteDBList\r\n    .map(this.str2Obj.bind(this))\r\n    .map(this.firestore.bind(this))\r\n\r\n    console.log(\"this.configs are\", this.configs)\r\n  }\r\n  \r\n  regExReplace(str: string) { return str.replace(/\\\"|\\,/g, ''); }\r\n  \r\n  str2Obj(str: string) {\r\n    const replaced = this.regExReplace(str)\r\n    const props = replaced.split(\"|\")\r\n    const partial = this.partialConfig(props)\r\n \r\n    let dbConfig:IDBConfig = {\r\n      apiKey: \"\",\r\n      appId: \"\",\r\n      authDomain: \"\",\r\n      databaseURL: \"\",\r\n      messagingSenderId: \"\",\r\n      projectId: \"\",\r\n      storageBucket: \"\"\r\n    }\r\n    dbConfig.apiKey = partial.apiKey\r\n    dbConfig.appId = partial.appId\r\n    dbConfig.messagingSenderId = partial.messagingSenderId\r\n    dbConfig.projectId = partial.projectId\r\n    dbConfig.authDomain = partial.projectId + \".firebaseapp.com\"\r\n    dbConfig.databaseURL = \"https://\" + partial.projectId + \".firebaseio.com\"\r\n    dbConfig.storageBucket = partial.projectId + \".appspot.com\"\r\n    \r\n    return dbConfig\r\n  }\r\n\r\n  partialConfig(props: string[]) {\r\n    let partial: IPartialDBConfig = {\r\n      apiKey: \"\",\r\n      appId: \"\",\r\n      messagingSenderId: \"\",\r\n      projectId: \"\"\r\n    }\r\n    props.map((prop: string) => {\r\n      const keyVal = prop.split(\"==\")\r\n      const key = keyVal[0]\r\n      switch (key) {\r\n        case \"apiKey\":\r\n          partial.apiKey = keyVal[1]\r\n          break;\r\n        case \"appId\":\r\n          partial.appId = keyVal[1]\r\n          break;\r\n        case \"messagingSenderId\":\r\n          partial.messagingSenderId = keyVal[1]\r\n          break;\r\n        case \"projectId\":\r\n          partial.projectId = keyVal[1]\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    })\r\n    return partial\r\n  }\r\n \r\n  firestore(json: IDBConfig) {\r\n    const firebase = this.options.firebase\r\n    const app = firebase.initializeApp(json, json.projectId)\r\n    const auth = app.auth()\r\n\r\n    auth.onAuthStateChanged((user: any) => {\r\n      this.user = user\r\n      this.signIn(auth)\r\n    })\r\n    \r\n\r\n    return { ...json, firestore: app.firestore() }\r\n  }\r\n\r\n  signIn(auth: any) {\r\n    console.log(\"signing in\")\r\n    auth\r\n      .signInWithEmailAndPassword(this.options.email, this.options.password)\r\n      .then((user: any) => this.load(constants.FROMSTART))\r\n      .catch((err: any) => {\r\n        if (err.code === \"auth/user-not-found\") this.signUp(auth);\r\n      });\r\n  }\r\n  \r\n  signUp(auth: any) {\r\n    console.log(\"signing up\")\r\n    auth\r\n      .createUserWithEmailAndPassword(this.options.email, this.options.password)\r\n      .then((user: any) => {\r\n        console.log(\"account created\") \r\n      }).catch((err: any) => console.log(err));\r\n  }\r\n  \r\n  load(from: string) {\r\n    const dbIdx = this.dbIdx(from)\r\n    const dbConfig:IFirestoreConfig = this.configs[dbIdx]\r\n\r\n    this.get(dbConfig.firestore, constants.SHEETNAME)\r\n    .then(this.onSuccess.bind(this))\r\n    .catch(this.onError.bind(this))\r\n  }\r\n  \r\n  onSuccess(data: any) {\r\n    console.info(\"successfully retrieved data\")\r\n    this.TLStore(constants.VOTED_DEALS, data)\r\n    this.send(data)\r\n  }\r\n\r\n  onError(err: any) {\r\n    console.info(\"error fetching data\", err.message)\r\n    const data = this.FLStore(constants.VOTED_DEALS, {})\r\n    this.send(data)\r\n  }\r\n\r\n  dbIdx(from: string) {\r\n    if (from === constants.FROM_INTERVAL) {\r\n      this.$dbIdx++\r\n      return this.$dbIdx >= this.configs.length ? 0 : this.$dbIdx\r\n    }\r\n    return this.$dbIdx\r\n  }\r\n\r\n  submit(data: any) {\r\n    console.log(\"user is\", this.options.email)\r\n    if (this.user) {\r\n      this.configs.map(config => {\r\n        this.save(config.firestore, data)\r\n        .then(() => console.log(\"successfully saved in\", config.projectId))\r\n        .catch((err: any) => console.error(\"error submitting document\", err))\r\n      })\r\n    } else {\r\n      console.log(\"you need to be signed in to store data\")\r\n    }\r\n  }\r\n\r\n  save(firestore: any, data: any) {\r\n    return firestore.collection(constants.SHEETNAME).doc(\"data\")\r\n    .set(data, { merge: true })\r\n  }\r\n\r\n  get(firestore: any, collection: string) {\r\n    return firestore.collection(collection).doc(\"data\")\r\n    .get().then((doc: any) => doc.exists ? doc.data() : {})\r\n    .catch((err: any) => console.error(err))\r\n  }\r\n}","import { constants, fxn } from \"./constants\";\r\nimport { IRemoteData } from \"./interfaces/config\";\r\nimport { IVoteDeals } from \"./interfaces/data\";\r\nimport { IBuild, IGroup } from \"./interfaces/others\";\r\nimport { Util } from \"./util\";\r\n\r\nexport class SKURows extends Util {\r\n  private skusEl;\r\n  private createSKUs;\r\n  private skuHTML;\r\n  private row;\r\n  private rows;\r\n\r\n  constructor(remoteData: IRemoteData, fbox: any) {\r\n    super(remoteData, fbox)\r\n\r\n    this.skusEl = this.el(constants.SKUSELQUERY)\r\n    this.createSKUs = (skus: IVoteDeals[]) => skus.map(this.skuHTML.bind(this)).join(\"\")\r\n    this.skuHTML = (sku: IVoteDeals) => this.html(sku)\r\n    this.row = (category: string) => this.el(`${constants.SKUROWQUERY}[data-category=\"${category}\"]`)\r\n    this.rows = () => this.all(constants.SKUROWQUERY)\r\n\r\n    fbox.pubsub.subscribe(constants.FOCUS, this.handleFocus.bind(this))\r\n    fbox.pubsub.subscribe(constants.GROUPED, this.handleDisplay.bind(this))\r\n  }\r\n\r\n  reset() {\r\n    this.skusEl.innerHTML = \"\"\r\n  }\r\n\r\n  selectedRow(categoryId: string) {\r\n    const query = fxn.rowQuery(categoryId)\r\n    return this.el(query)\r\n  }\r\n\r\n  handleFocus(categoryId: string) {\r\n    const skuRows = this.rows()\r\n    const currentRow = this.selectedRow(categoryId)\r\n    console.log(\"categoryId\", categoryId)\r\n    this.toggle(skuRows, currentRow, constants.ACTIVECLASS)\r\n  }\r\n\r\n  handleDisplay(data: IBuild) {\r\n    this.reset()\r\n    const { categories, map } = data \r\n\r\n    for (let [category, skus] of map.entries()) {\r\n      this.skusEl.innerHTML += this.rowHTML(category, skus, categories)\r\n    }\r\n\r\n    const catId = this.categoryId(categories[0]) \r\n\r\n    this.handleFocus(catId)\r\n\r\n    // this.fbox.pubsub.emit(constants.FOCUS, catId)\r\n    this.show()\r\n  }\r\n\r\n  rowHTML(category: string, skus: IVoteDeals[], categories: string[]) {\r\n    const skusHTML = this.createSKUs(skus)\r\n    return this.createRow(category, skusHTML, categories)\r\n  }\r\n\r\n  createRow(category: string, skusHTML: string, categories: string[]) {\r\n\r\n    const rowClass = category === categories[0]\r\n    ? `${constants.SKUROWCLASS} active`\r\n    : constants.SKUROWCLASS\r\n\r\n    return `<div class=\"${rowClass}\" data-category=\"${this.categoryId(category)}\">${skusHTML}</div>`\r\n  }\r\n\r\n  html(sku: IVoteDeals) {\r\n    const oldPrice = this.price(sku.old_price)\r\n    const newPrice = this.price(sku.new_price)\r\n    // const oldPrice = sku.old_price\r\n    // const newPrice = sku.new_price\r\n    const discount = this.discount(sku.old_price, sku.new_price)\r\n    const idName = sku.name + \"-\" + (+new Date()) \r\n\r\n    return `<div class=\"-sku -posrel -${sku.status}\" id=\"${this.id(idName, '-')}\"><a href=\"${sku.pdp}\" target=\"_blank\" class=\"-img -posrel\" ><span class=\"-posabs -preloader -loading\"></span><div class=\"-posabs -shadow\"><span class=\"-posabs\">sold out</span></div><img class=\"lazy-image loaded\" data-src=\"${sku.image}\" alt=\"sku_img\" /></a><div class=\"-details -posabs\"><div class=\"-name\">${sku.name}</div><div class=\"-prices\"><div class=\"-price -new\">${newPrice}</div><div class=\"-price -old\">${oldPrice}</div><div class=\"-disvcount\">${discount}</div></div></div><div class=\"-btns -posabs\"><a href=\"${sku.pdp}\" target=\"_blank\" class=\"-btn -view\"></a><div class=\"-btn -unvote\"></div><div class=\"-btn -vote\"></div></div><div class=\"-vcounts -posabs\"><div class=\"-ploader -unvotedown\"></div><div class=\"-ploader -voteup\"></div><div class=\"-vcount -down\"><div class=\"-icon -unvote\"></div><div class=\"-txt\">8</div></div><div class=\"-vcount -up\"><div class=\"-icon -vote\"></div><div class=\"-txt\">9</div></div></div></div>`\r\n  }\r\n}","import { IVoteDeals } from './interfaces/data';\r\nimport { constants } from \"./constants\";\r\nimport { IRemoteData } from \"./interfaces/config\";\r\nimport { IBuild } from \"./interfaces/others\";\r\nimport { Util } from \"./util\";\r\n\r\nexport class Tabs extends Util {\r\n  \r\n  private $tabBounds: DOMRect\r\n  private tabs: HTMLElement\r\n  private tabsParent: HTMLElement\r\n  private prev: HTMLElement\r\n  private next: HTMLElement\r\n\r\n  constructor(remoteData: IRemoteData, fbox: any) {\r\n    super(remoteData, fbox)\r\n    this.$tabBounds = {} as DOMRect\r\n\r\n    this.tabs = this.el(constants.TABSQUERY)\r\n    this.tabsParent = this.el(constants.TABSPARENTQUERY)\r\n    this.prev = this.el(constants.PREVQUERY)\r\n    this.next = this.el(constants.NEXTQUERY)\r\n\r\n    fbox.pubsub.subscribe(constants.GROUPED, this.build.bind(this))\r\n    this.tabs.addEventListener(constants.CLICK, this.tabListener.bind(this))\r\n  }\r\n\r\n  reset() {\r\n    this.tabs.innerHTML = \"\"\r\n  }\r\n\r\n  build(data: IBuild) {\r\n    this.reset()\r\n\r\n    const { categories } = data\r\n    console.log(\"first category from tab\", categories[0])\r\n\r\n    this.tabs.innerHTML = categories\r\n    .map(this.createTab.bind(this))\r\n    .join(\"\")\r\n\r\n    // first tab\r\n    const firstTab = this.all(\".-tab\")[0] as HTMLElement\r\n    this.setTabProps(firstTab, constants.FIRSTTAB)\r\n    this.show()\r\n\r\n    this.fbox.is_mobile === false && this.scrollListeners()\r\n  }\r\n  \r\n  scrollListeners() {\r\n    this.next.addEventListener(constants.CLICK, () => this.scrollTo(constants.NEXT))\r\n    this.prev.addEventListener(constants.CLICK, () => this.scrollTo(constants.PREV))\r\n  }\r\n\r\n  scrollTo(type: string) {\r\n    const start = type === constants.NEXT\r\n    ? this.tabs.scrollLeft + 50 : this.tabs.scrollLeft - 50\r\n    const end = type === constants.NEXT\r\n    ? this.tabs.scrollLeft + 300 : this.tabs.scrollLeft - 300\r\n\r\n    const delta = end - start\r\n    this.tabs.scrollLeft = start + delta * 1\r\n  }\r\n\r\n  setTabProps(el: HTMLElement, by: string) {\r\n    this.toggle(this.all(constants.TABQUERY), el, constants.ACTIVECLASS)\r\n\r\n    if (by === constants.TABLISTENER) {\r\n      this.fbox.pubsub.emit(constants.FOCUS, el.getAttribute(constants.DATACATEGORY))\r\n    }\r\n  }\r\n\r\n  createTab(category: string, idx: number) {\r\n    const tabClass = idx === 0\r\n    ? \"-tab active -inlineblock -posrel -vamiddle\"\r\n    : \"-tab -inlineblock -posrel -vamiddle\"\r\n\r\n    return `<a href=\"#top\" class=\"${tabClass}\" data-category=\"${this.categoryId(category)}\"><span class=\"-posabs -preloader -loading\"></span><span>${category}</span></a>`\r\n  }\r\n\r\n  tabListener(evt: Event) {\r\n    const parent = (evt.target as HTMLElement).parentElement as HTMLElement\r\n    this.isATab(parent) && this.setTabProps(parent, constants.TABLISTENER)\r\n  }\r\n}","import { IOptions } from './interfaces/others';\r\nimport { constants } from \"./constants\";\r\nimport { Database } from \"./database\";\r\nimport { IRemoteData } from \"./interfaces/config\";\r\nimport { IVoteDeals } from \"./interfaces/data\";\r\nimport { SKURows } from \"./skurows\";\r\nimport { Tabs } from \"./tabs\";\r\nimport { Util } from \"./util\";\r\n\r\nexport class Controller extends Util {\r\n  private data: IVoteDeals[]\r\n  private tandcs: IVoteDeals[]\r\n  private tandcsEl: HTMLElement\r\n  private hiwCTA: HTMLElement\r\n  private topBanner: HTMLElement\r\n  private tabs: Tabs\r\n  private skuRows: SKURows\r\n  private database: Database\r\n\r\n  constructor(remoteData: IRemoteData, fbox: any, options: IOptions) {\r\n    super(remoteData, fbox)\r\n\r\n    this.data = this.getData(constants.INITIATIVE)\r\n    this.tandcs = this.getData(constants.TANDCS)\r\n\r\n    this.tandcsEl = this.el(constants.TANDCSQUERY)\r\n    this.hiwCTA = this.el(constants.HOWITWORKSQUERY)\r\n    this.topBanner = this.el(constants.TOPBANNERQUERY)\r\n\r\n    this.hiwCTA.addEventListener(constants.CLICK, this.toggleBanner.bind(this))\r\n\r\n    this.tabs = new Tabs(remoteData, fbox)\r\n    this.skuRows = new SKURows(remoteData, fbox)\r\n    this.database = new Database(remoteData, fbox, options)\r\n\r\n    this.fbox.pubsub.subscribe(constants.RESET, this.init.bind(this))\r\n\r\n    this.init()\r\n    .setBanner()\r\n    .displayTAndCs()\r\n    .show()\r\n    \r\n  }\r\n\r\n  init() {\r\n    const allCategories = this.allCategories(this.data)\r\n    const map = this.group(this.data, allCategories)\r\n\r\n    const categories = this.randomize(allCategories)\r\n    this.fbox.pubsub.emit(constants.GROUPED, { map, categories })\r\n\r\n    return this\r\n  }\r\n\r\n  toggleBanner() {\r\n    this.topBanner.classList.toggle(constants.SHOWCLASS)\r\n    const hiwText = this.hiwCTA.querySelector(constants.TXTCLASS) as HTMLElement\r\n    hiwText.textContent = hiwText?.textContent === constants.TERMSANDCONDIIONS\r\n    ? constants.CLOSE : constants.TERMSANDCONDIIONS\r\n  }\r\n\r\n  setBanner() {\r\n    const bannerImage = this.el(constants.BANNERQUERY)\r\n    bannerImage.setAttribute(constants.DATASRC, this.platform().banner)\r\n    return this\r\n  }\r\n\r\n  displayTAndCs() {\r\n    this.tandcsEl.innerHTML = this.tandcs.map(this.tandcHTML.bind(this)).join(\"\")\r\n    return this\r\n  }\r\n\r\n  tandcHTML(tandc: IVoteDeals) {\r\n    return `<div class=\"-rule_element\"><div class=\"-inlineblock -vatop -num\">${tandc.sku}.</div><div class=\"-inlineblock -vatop -desc\">${tandc.name}</div></div>`\r\n  }\r\n}","import { IOptions } from './core/interfaces/others';\r\nimport { config, constants } from \"./core/constants\";\r\nimport { Controller } from \"./core/controller\";\r\nimport { IRemoteData } from \"./core/interfaces/config\"\r\n\r\nconst wind = window as any\r\nconst fbox = wind.Featurebox({ config, name: constants.SHEETNAME })\r\nconst firebase = wind.firebase\r\nconst store = wind.store\r\nconst btoa = wind.btoa\r\nconst localStorage = wind.localStorage\r\nlet controller: Controller\r\n\r\nconst currentUser = {\r\n  isLoggedIn: false,\r\n  email: \"\",\r\n  pw: \"\",\r\n};\r\nconst interval = setInterval(() => {\r\n  if (/loaded|complete/.test(document.readyState)) {\r\n    clearInterval(interval);\r\n    currentUser.email = store.customer.email;\r\n    currentUser.pw = btoa(currentUser.email.split(\"\").reverse().join(\"\"));\r\n\r\n    if (currentUser.email.length > 0) {\r\n      currentUser.isLoggedIn = true;\r\n\r\n      const email = currentUser.email;\r\n      const password = currentUser.pw;\r\n\r\n      const options: IOptions = {\r\n        email,\r\n        password,\r\n        firebase,\r\n        localStorage\r\n      }\r\n \r\n      fbox.pubsub.subscribe(fbox.FETCHED_DATA, (data: any) => {\r\n        const remoteData:IRemoteData = data as IRemoteData\r\n        controller = new Controller(remoteData, fbox, options)\r\n        const calendar:any[] = controller.getData(constants.NAME)\r\n      })\r\n    }\r\n  }\r\n}, 10);\r\n"],"names":["voteDBList","constants","fxn","query","category","Util","constructor","remoteData","fbox","timeInterval","this","minutesDuration","Number","config","minute_duration_campaign_calendar","currency","domain","el","document","querySelector","all","querySelectorAll","allCategories","data","Set","map","datum","pad","time","toString","length","endTime","randomize","list","sort","Math","random","skuRow","categoryId","id","tab","live","action","forEach","each","classList","skuID","sku","name","Date","capitalize","str","toUpperCase","slice","isPast","now","isFuture","past","indexOf","digit","num","unit","isATab","contains","midnight","setHours","getData","initiative","json_list","filter","group","categories","Map","skus","randomized","set","pastAndFutureTimes","times","future","timeUnits","$date","day","getDay","month","getMonth","date","getDate","hour","getHours","mins","getMinutes","toggle","toRemove","toAdd","className","remove","add","price","raw","numFromStr","toLocaleString","replace","formatPrice","formatted","currency_position","isANumber","split","piece","isNaN","discount","$old","$new","oldP","newP","ratio","round","replacePattern","pattern","re","RegExp","delim","replaceApostrophe","replaceAmpersand","toLowerCase","join","key","keyStr","obj","dbConfigKey","show","imageObserver","ImageObserver","platform","isMobile","window","mBannerKey","dBannerKey","deeplinkKey","mBanner","dBanner","deeplink","banner","live_link","host","download_apps_page","Database","options","super","$dbIdx","send","pubsub","emit","FLStore","useIfNull","JSON","parse","localStorage","getItem","TLStore","item","setItem","stringify","configs","str2Obj","bind","firestore","console","log","regExReplace","props","partial","partialConfig","dbConfig","apiKey","appId","authDomain","databaseURL","messagingSenderId","projectId","storageBucket","prop","keyVal","json","app","firebase","initializeApp","auth","onAuthStateChanged","user","signIn","signInWithEmailAndPassword","email","password","then","load","catch","err","code","signUp","createUserWithEmailAndPassword","from","dbIdx","get","onSuccess","onError","info","message","submit","save","error","collection","doc","merge","exists","SKURows","skusEl","createSKUs","skuHTML","html","row","rows","subscribe","handleFocus","handleDisplay","reset","innerHTML","selectedRow","skuRows","currentRow","entries","rowHTML","catId","skusHTML","createRow","oldPrice","old_price","newPrice","new_price","idName","status","pdp","image","Tabs","$tabBounds","tabs","tabsParent","prev","next","build","addEventListener","tabListener","createTab","firstTab","setTabProps","is_mobile","scrollListeners","scrollTo","type","start","scrollLeft","delta","by","getAttribute","idx","evt","parent","target","parentElement","Controller","tandcs","tandcsEl","hiwCTA","topBanner","toggleBanner","database","init","setBanner","displayTAndCs","hiwText","textContent","setAttribute","tandcHTML","tandc","wind","Featurebox","store","btoa","controller","currentUser","isLoggedIn","pw","interval","setInterval","test","readyState","clearInterval","customer","reverse","FETCHED_DATA"],"sourceRoot":""}
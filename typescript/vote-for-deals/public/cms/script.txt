
<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-firestore.js"></script>
<script src="https://jumia-app-vision.web.app/featurebox/fb.js"></script>
<script>
(()=>{"use strict";const t="vote_deals_categories",s="focus",e="grouped",i="tab listener",a=".-sku_row",r="click",n="Terms & Conditions",o="active",c="next",l="-sku_row -posrel",h=t=>"#initiative "+t,d=t=>'.-tab[data-category="'+t+'"]';class u{constructor(t,s){this.timeInterval=0,this.remoteData=t,this.minutesDuration=Number(this.remoteData.config.minute_duration_campaign_calendar),this.currency=this.remoteData.config.currency,this.config=this.remoteData.config,this.domain=this.remoteData.domain,this.fbox=s,this.el=t=>document.querySelector(h(t)),this.all=t=>document.querySelectorAll(h(t)),this.allCategories=t=>[...new Set(t.map((t=>t.category)))],this.pad=t=>1==t.toString().length?"0"+t:t,this.endTime=t=>t+60*this.minutesDuration*1e3,this.randomize=t=>t.sort((()=>.5-Math.random())),this.skuRow=t=>this.el(d(t)),this.categoryId=t=>`cat-${this.id(t,"-")}`,this.tab=t=>this.el(d(t)),this.live=(t,s)=>t.forEach((t=>t.classList[s]("-live"))),this.skuID=t=>t.name+"-"+ +new Date(t.sku),this.capitalize=t=>t[0].toUpperCase()+t.slice(1),this.isPast=t=>Date.now()>t&&Date.now()>this.endTime(t),this.isFuture=(t,s)=>-1===s.indexOf(t),this.digit=(t,s)=>0!==t?this.pad(t)+s:"",this.isATab=t=>t.classList.contains("-tab"),this.midnight=t=>+new Date(t).setHours(0,0,0,0)}getData(t){return this.remoteData.json_list.filter((s=>s.initiative===t))}group(t,s){const e=new Map;return s.map((s=>{const i=t.filter((t=>t.category===s)),a=this.randomize(i);e.set(s,a)})),e}pastAndFutureTimes(t){const s=t.filter(this.isPast),e=t.filter((t=>this.isFuture(t,s)));return{past:s,future:e}}timeUnits(t){const s=new Date(t);return{day:s.getDay(),month:s.getMonth(),date:s.getDate(),hour:s.getHours(),mins:s.getMinutes()}}toggle(t,s,e){t.forEach((t=>t.classList.remove(e))),s.classList.add(e)}price(t){const s=this.numFromStr(t);return`${this.currency} ${Number(s).toLocaleString()}`}numFromStr(t){return Number(t.replace(/[^0-9\.]+/g,""))}formatPrice(t){const s="prefix"===this.config.currency_position?`${this.currency} ${Number(t).toLocaleString()}`:`${Number(t).toLocaleString()} ${this.config.currency}`;return 0===Number(t)?"FREE":s}isANumber(t){const s=t.split(" ").filter((t=>!isNaN(Number(t))))[0];return isNaN(Number(s))?null:Number(s)}discount(t,s){const e=this.isANumber(t),i=this.isANumber(s);if(!isNaN(Number(e))){var a=100*(Number(e)-Number(i))/Number(e);return isNaN(a)?"":"-"+Math.round(a)+"%"}return null}replacePattern(t,s){const e=new RegExp(t,"g");return s.replace(e,"-")}id(t,s){const e=this.replacePattern("'",t),i=this.replacePattern("&",e);return this.replacePattern("%",i).toLowerCase().split(" ").join(s)}key(t,s){return t}show(){let t=new this.fbox.ImageObserver;return t=null,this}platform(){const t="ontouchstart"in window,s=this.key("vote_deals_categories_mobile_banner",this.config),e=this.key("vote_deals_categories_desktop_banner",this.config),i=this.key("vote_deals_categories_deeplink",this.config),a=this.config[s],r=this.config[e],n=this.config[i];return{banner:t?a:r,live_link:t?n:`${this.domain.host}/${this.config.download_apps_page}`}}}class b extends u{constructor(t,i){super(t,i),this.skusEl=this.el(".-skus"),this.createSKUs=t=>t.map(this.skuHTML.bind(this)).join(""),this.skuHTML=t=>this.html(t),this.row=t=>this.el(`.-sku_row[data-category="${t}"]`),this.rows=()=>this.all(a),i.pubsub.subscribe(s,this.handleFocus.bind(this)),i.pubsub.subscribe(e,this.handleDisplay.bind(this))}reset(){this.skusEl.innerHTML=""}selectedRow(t){const s=(t=>`.-sku_row[data-category="${t}"]`)(t);return this.el(s)}handleFocus(t){const s=this.rows(),e=this.selectedRow(t);console.log("categoryId",t),this.toggle(s,e,o)}handleDisplay(t){this.reset();const{categories:s,map:e}=t;for(let[t,i]of e.entries())this.skusEl.innerHTML+=this.rowHTML(t,i,s);const i=this.categoryId(s[0]);this.handleFocus(i),this.show()}rowHTML(t,s,e){const i=this.createSKUs(s);return this.createRow(t,i,e)}createRow(t,s,e){return`<div class="${t===e[0]?"-sku_row -posrel active":l}" data-category="${this.categoryId(t)}">${s}</div>`}html(t){const s=this.price(t.old_price),e=this.price(t.new_price),i=this.discount(t.old_price,t.new_price),a=t.name+"-"+ +new Date;return`<div class="-sku -posrel -${t.status}" id="${this.id(a,"-")}"><a href="${t.pdp}" target="_blank" class="-img -posrel" ><span class="-posabs -preloader -loading"></span><div class="-posabs -shadow"><span class="-posabs">sold out</span></div><img class="lazy-image loaded" data-src="${t.image}" alt="sku_img" /></a><div class="-details -posabs"><div class="-name">${t.name}</div><div class="-prices"><div class="-price -new">${e}</div><div class="-price -old">${s}</div><div class="-discount">${i}</div></div></div><div class="-btns -posabs"><a href="${t.pdp}" target="_blank" class="-btn -view"></a><div class="-btn -unvote"></div><div class="-btn -vote"></div></div><div class="-counts -posabs"><div class="-ploader -unvotedown"></div><div class="-ploader -voteup"></div><div class="-count -down"><div class="-icon -unvote"></div><div class="-txt">8</div></div><div class="-count -up"><div class="-icon -vote"></div><div class="-txt">9</div></div></div></div>`}}class p extends u{constructor(t,s){super(t,s),this.$tabBounds={},this.tabs=this.el(".-all-tabs"),this.tabsParent=this.el(".-tabs"),this.prev=this.el(".-control.-prev"),this.next=this.el(".-control.-next"),s.pubsub.subscribe(e,this.build.bind(this)),this.tabs.addEventListener(r,this.tabListener.bind(this))}reset(){this.tabs.innerHTML=""}build(t){this.reset();const{categories:s}=t;console.log("first category from tab",s[0]),this.tabs.innerHTML=s.map(this.createTab.bind(this)).join("");const e=this.all(".-tab")[0];this.setTabProps(e,"first tab"),this.show(),!1===this.fbox.is_mobile&&this.scrollListeners()}scrollListeners(){this.next.addEventListener(r,(()=>this.scrollTo(c))),this.prev.addEventListener(r,(()=>this.scrollTo("prev")))}scrollTo(t){const s=t===c?this.tabs.scrollLeft+50:this.tabs.scrollLeft-50,e=(t===c?this.tabs.scrollLeft+300:this.tabs.scrollLeft-300)-s;this.tabs.scrollLeft=s+1*e}setTabProps(t,e){this.toggle(this.all(".-tab"),t,o),e===i&&this.fbox.pubsub.emit(s,t.getAttribute("data-category"))}createTab(t,s){return`<a href="#top" class="${0===s?"-tab active -inlineblock -posrel -vamiddle":"-tab -inlineblock -posrel -vamiddle"}" data-category="${this.categoryId(t)}"><span class="-posabs -preloader -loading"></span><span>${t}</span></a>`}tabListener(t){const s=t.target.parentElement;this.isATab(s)&&this.setTabProps(s,i)}}class g extends u{constructor(t,s){super(t,s),this.data=this.getData("Vote Deals Categories"),this.tandcs=this.getData("Vote Deals Categories T & Cs"),this.tandcsEl=this.el(".-re.-rules"),this.hiwCTA=this.el(".-how-it-works"),this.topBanner=this.el(".-banner.-top"),this.hiwCTA.addEventListener(r,this.toggleBanner.bind(this)),this.tabs=new p(t,s),this.skuRows=new b(t,s),this.fbox.pubsub.subscribe("reset",this.init.bind(this)),this.init().setBanner().displayTAndCs().show()}init(){const t=this.allCategories(this.data),s=this.group(this.data,t),i=this.randomize(t);return this.fbox.pubsub.emit(e,{map:s,categories:i}),this}toggleBanner(){this.topBanner.classList.toggle("-show");const t=this.hiwCTA.querySelector(".-txt");t.textContent=(null==t?void 0:t.textContent)===n?"Close":n}setBanner(){return this.el(".-banner.-top img.lazy-image").setAttribute("data-src",this.platform().banner),this}displayTAndCs(){return this.tandcsEl.innerHTML=this.tandcs.map(this.tandcHTML.bind(this)).join(""),this}tandcHTML(t){return`<div class="-rule_element"><div class="-inlineblock -vatop -num">${t.sku}.</div><div class="-inlineblock -vatop -desc">${t.name}</div></div>`}}const m=window.Featurebox({config:{apiKey:"AIzaSyAA8dQEt-yZnDyY3Lra8lndRJ3LWNYVW0o",authDomain:"jumia-c15a3.firebaseapp.com",databaseURL:"https://jumia-c15a3.firebaseio.com",projectId:"jumia-c15a3",storageBucket:"jumia-c15a3.appspot.com",messagingSenderId:"295115190934",appId:"1:295115190934:web:de0b33b53a514c3c"},name:t});let v;m.pubsub.subscribe(m.FETCHED_DATA,(t=>{v=new g(t,m),v.getData("Vote Deals Categories")}))})();
</script>
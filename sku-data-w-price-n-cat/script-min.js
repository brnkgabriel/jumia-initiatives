class FetchData{constructor(){this.skus_textarea=document.getElementById("skus"),this.fetch_el=document.getElementById("fetch"),this.country=document.getElementById("country"),this.copy_data=document.getElementById("copy-data"),this.app_data=document.getElementById("app-data"),this.domain="https://www.jumia.com.ng",this.catalog="https://www.jumia.com.ng/catalog/?q=",this.country.addEventListener("change",(()=>{this.domain="https://www.jumia"+this.country.value,this.catalog=this.domain+"/catalog/?q="})),this.fetch_el.addEventListener("click",(()=>this.fetch())),this.copy_data.addEventListener("click",(()=>this.copyToClipboard(this.app_data)))}copyToClipboard(t){var e,a,c=document.body;if(document.createRange&&window.getSelection){e=document.createRange(),(a=window.getSelection()).removeAllRanges();try{e.selectNodeContents(t),a.addRange(e)}catch(c){e.selectNode(t),a.addRange(e)}}else c.createTextRange&&((e=c.createTextRange()).moveToElementText(t),e.select());document.execCommand("copy")}fetch(){var t=this.skus_textarea.value.split("\n");Promise.all(t.map((t=>{var e=this.catalog+t;return fetch(e).then((t=>t.text())).then((t=>this.data(t)))}))).then((e=>this.build(e,t))).catch((t=>{}))}data(t){var e=t.indexOf("window.__STORE__=")+17,a=t.indexOf("};</scr")+1,c=t.substring(e,a);return JSON.parse(c).products?JSON.parse(c).products[0]:{}}categoryL1(t){const e=t.categories;if(e){return e.split("/")[0]}return""}build(t,e){var a="",c=this.app_data.querySelector("tbody");t.map(((t,c)=>{var d=t.prices?t.prices.oldPrice:"",s=t.prices?t.prices.price:"",i=t.url?this.domain+t.url:"";const n=this.categoryL1(t);a+=`<tr><td>${t.sku?t.sku:e[c]}</td><td>${t.displayName?t.displayName:""}</td><td>${t.image?t.image:""}</td><td>${i}</td><td>${d}</td><td>${s}</td><td>${n}</td></tr>`})),c.innerHTML=a}}new FetchData;
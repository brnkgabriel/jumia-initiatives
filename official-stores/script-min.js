const Begin=function(s){class i{constructor(s){this.ID="official-stores",this.DATA_AVAILABLE="data available",this.MAX_ITEM_PER_COL=2,this.MIN_FOR_2_PER_COL=18,this.TYPES={brand:"brand",about:"about",category:"category"},this.isMobile="ontouchstart"in window,this.host="https://www.jumia",this.el=(s,i)=>i?i.querySelector(s):document.querySelector(s),this.all=(s,i)=>i?i.querySelectorAll(s):document.querySelectorAll(s),this.escapeStr=s=>s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),this.mainEl=this.el(".-main-el"),this.topBannerEl=this.el(".-top-banner"),this.initiativeEl=this.el("#initiative"),this.fetched=this.el(".-fetched"),this.brandMap={}}}class t{constructor(s){this.initialize(s)}initialize(s){this.images=s?s.querySelectorAll(".lazy-image"):document.querySelectorAll(".lazy-image"),this.preloaders=s?s.querySelectorAll(".-preloader"):document.querySelectorAll(".-preloader"),this.images.forEach(this.lazyLoad.bind(this))}lazyLoad(s){void 0!==s.src?(s.src=s.getAttribute("data-src"),s.onload=()=>this.afterLoad(s)):this.afterLoad(s)}afterLoad(s){s.classList.add("loaded");const i=s.parentElement.querySelector(".-preloader");this.removeLoader(i),this.preloaders.forEach(this.removeLoader.bind(this))}removeLoader(s){s.classList.remove("-loading")}}class e extends i{constructor(s){super(s),this.isACategoryBrand=(s,i)=>s.category.toLowerCase()===i,this.isCompleteColumn=s=>s%this.MAX_ITEM_PER_COL==1,d.subscribe(this.DATA_AVAILABLE,this.process.bind(this))}process(s){this.domain=this.host+s.config.countryLocale+"/";const i=s.categories.map((i=>{const t=i.name.toLowerCase();return i.brands=s.brands.filter((s=>this.isACategoryBrand(s,t))),i})).sort(((s,i)=>i.brands.length-s.brands.length));this.build(i).setBanner(s.config).show().listeners()}listeners(){this.initiativeEl.addEventListener("click",(s=>{const i=s.target;switch(i.getAttribute("data-type")){case this.TYPES.brand:const s=i.parentElement.getAttribute("data-brand"),t=this.brandMap[s],e=this.el(`.-superblock[data-name="${t.category}"]`),a=this.el(".-productfloor",e),d=this.el(".-productfloor .-title",e),r=this.el(".-see-all",e);d.textContent=`${t.name} top deals`;const l=`${this.domain}${t.url}`;r.setAttribute("href",l),this.getProducts(l,a);break;default:break}}))}getProducts(s,i){return i.classList.remove("active"),fetch(s).then((s=>s.text())).then(this.extractProducts.bind(this)).then((s=>this.onSuccess(s,i))).catch((s=>this.onError(s,i)))}onSuccess(s,i){this.el(".-skus.-actual",i).innerHTML=s.map(this.skuHtml.bind(this)).join(""),this.show(),i.classList.add("active")}onError(s,i){productfloor.classList.add("active")}extractProducts(s){var i=this.products(s),t=this.format(i);return JSON.parse(t).products}format(s){return this.isMobile?this.mobile(s):this.desktop(s)}products(s){this.fetched.innerHTML=s;var i=[],t=this.fetched.querySelectorAll("script");this.fetched.innerHTML="",t.forEach((s=>i.push(s.innerHTML)));var e=i.findIndex((s=>-1!==s.indexOf('"products":[{')));return i[e]}mobile(s){var i=s.indexOf('"products":'),t="{"+s.substring(i,s.length),e=t.indexOf(',"head"');return t.substring(0,e-1)+"}"}desktop(s){var i=s.indexOf('"products":'),t="{"+s.substring(i,s.length),e=this.braceIndices(t,this.escapeStr("}]")),a=e[e.length-1];return t.substring(0,a+2)+"}"}braceIndices(s,i){for(var t,e=new RegExp(i,"gi"),a=[];t=e.exec(s);)a.push(t.index);return a}setBanner(s){const{desktopBanner:i,mobileAppBanner:t}=s,e=this.isMobile?t:i;return this.topBannerEl.setAttribute("data-src",e),this}show(){return this.imageObserver=new t,this.imageObserver=null,this}build(s){return this.mainEl.innerHTML=s.map(this.buildSuperblock.bind(this)).join(""),this}buildSuperblock(s){let i=`<div class="-superblock" data-name="${s.name}">`;const t=`<div class="-title" style="background-color: ${s.backgroundColor};color:${s.fontColor}">${s.name}</div>`,e=this.buildFreelinks(s.brands),a=this.buildProductFloor({skus:s.skus,url:s.url,name:s.name,fontColor:s.fontColor,backgroundColor:s.backgroundColor});return i+=s.brands.length>=1?t:"",i+=e,i+=a,i+="</div>",s.skus.length>=7?i:""}buildFreelinks(s){return s.length>=this.MIN_FOR_2_PER_COL?this.twoPerCol(s):this.onePerCol(s)}twoPerCol(s){const i='<div class="-brands-col">';let t='<div class="-brands">',e=i;for(let a=0;a<s.length;a++){const d=s[a];this.brandMap[d.name]=d,e+=`<a href="${this.domain}${d.url}" class="-brand -posrel" data-brand="${d.name}" data-url="${d.url}"><span class="-posabs -preloader -loading" data-type="brand"></span><img class="lazy-image" data-src="${d.logo}" alt="${d.name}"/></a>`,this.isCompleteColumn(a)&&(e+="</div>",t+=e,e=i)}return t+="</div>",t}onePerCol(s){let i='<div class="-brands">';return i+=s.map(this.onePerColHtml.bind(this)).join(""),i+="</div>",i}onePerColHtml(s){return this.brandMap[s.name]=s,`<a href="${this.domain}${s.url}" class="-brand -posrel" data-brand="${s.name}" data-url="${s.url}"><span class="-posabs -preloader -loading" data-type="brand"></span><img class="lazy-image" data-src="${s.logo}" alt="${s.name}"/></a>`}buildProductFloor(s){const{skus:i,url:t,name:e,fontColor:a,backgroundColor:d}=s;let r=`<div class="-productfloor active" data-name="${e}">`;return r+=`<div class="-header" style="background-color:${d}"><div class="-title" style="color:${a}">${e} top deals</div><a href="${t}" class="-see-all" style="color:${a}"><span class="-txt">See all</span><span class="-arrow" style="border: 2px solid ${a}"></span></a></div>`,r+=`<div class="-skus -actual">${i.map(this.skuHtml.bind(this)).join("")}</div><div class="-skus -skeleton"><div class="-posrel -sku"><div class="-img -posrel"><img src="https://ng.jumia.is/cms/0-1-initiatives/placeholder_300x300.png" /></div><div class="-details"><div class="-name -posrel"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div></div><div class="-newPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:50%;margin:4px 0"></div></div><div class="-oldPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:40%"></div></div></div></div><div class="-posrel -sku"><div class="-img -posrel"><img src="https://ng.jumia.is/cms/0-1-initiatives/placeholder_300x300.png" /></div><div class="-details"><div class="-name -posrel"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div></div><div class="-newPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:50%;margin:4px 0"></div></div><div class="-oldPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:40%"></div></div></div></div><div class="-posrel -sku"><div class="-img -posrel"><img src="https://ng.jumia.is/cms/0-1-initiatives/placeholder_300x300.png" /></div><div class="-details"><div class="-name -posrel"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div></div><div class="-newPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:50%;margin:4px 0"></div></div><div class="-oldPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:40%"></div></div></div></div><div class="-posrel -sku"><div class="-img -posrel"><img src="https://ng.jumia.is/cms/0-1-initiatives/placeholder_300x300.png" /></div><div class="-details"><div class="-name -posrel"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div></div><div class="-newPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:50%;margin:4px 0"></div></div><div class="-oldPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:40%"></div></div></div></div><div class="-posrel -sku"><div class="-img -posrel"><img src="https://ng.jumia.is/cms/0-1-initiatives/placeholder_300x300.png" /></div><div class="-details"><div class="-name -posrel"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div></div><div class="-newPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:50%;margin:4px 0"></div></div><div class="-oldPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:40%"></div></div></div></div><div class="-posrel -sku"><div class="-img -posrel"><img src="https://ng.jumia.is/cms/0-1-initiatives/placeholder_300x300.png" /></div><div class="-details"><div class="-name -posrel"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div></div><div class="-newPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:50%;margin:4px 0"></div></div><div class="-oldPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:40%"></div></div></div></div><div class="-posrel -sku"><div class="-img -posrel"><img src="https://ng.jumia.is/cms/0-1-initiatives/placeholder_300x300.png" /></div><div class="-details"><div class="-name -posrel"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div><div class="-txt" style="background-color:#f5f5f5;height:14px;width:80%"></div></div><div class="-newPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:50%;margin:4px 0"></div></div><div class="-oldPrice"><div class="-txt" style="background-color:#f5f5f5;height:14px;width:40%"></div></div></div></div></div>`,r+="</div>",r}skuHtml(s){const{sku:i,displayName:t,url:e,prices:{oldPrice:a,price:d,discount:r},image:l}=s,o=r?`<div class="-discount -posabs">${r}</div>`:"",c=r?`<div class="-oldPrice">${a}</div>`:"";return`\n      <a href="${this.domain+e}" data-sku="${i}" class="-posrel -sku"><div class="-img -posrel"><span class="-posabs -preloader -loading"></span><img class="lazy-image" data-src="${l}" alt="${t}"/></div>${o} <div class="-details"><div class="-name">${t}</div><div class="-newPrice">${d}</div>${c}</div></a>\n      `}}class a extends i{constructor(s){super(s),this.send=s=>d.emit(this.DATA_AVAILABLE,s),this.initialize(s)}initialize(s){this.config=s;const i=firebase.initializeApp(this.config,this.config.projectId);this.db=i.firestore(),this.get()}get(){return this.mainEl.classList.add("-loading"),this.db.collection(this.ID).doc("data").get().then(this.onSuccess.bind(this)).catch(this.onError.bind(this))}onSuccess(s){this.mainEl.classList.remove("-loading");const i=s.exists?s.data():{};this.send(i)}onError(s){this.mainEl.classList.remove("-loading"),this.send({})}set(s){return this.db.collection(this.ID).doc("data").set(s,{merge:!0})}}const d=new class{constructor(){this.events={}}subscribe(s,i){this.events[s]=this.events[s]||[],this.events[s].push(i)}unsubscribe(s,i){if(this.events[s]){const t=this.events[s].findIndex((s=>s===i));this.events[s].splice(t,1)}}emit(s,i){this.events[s]&&this.events[s].forEach((s=>s(i)))}};new class extends i{constructor(s){super(s),this.database=new a(s),this.superblocksAndBanners=new e(s)}}(s)},config={apiKey:"AIzaSyCKGQw8QCq8qcxJ39QznQgarzOLP_WF1_Q",authDomain:"jumia-17681.firebaseapp.com",databaseURL:"https://jumia-17681.firebaseio.com",projectId:"jumia-17681",storageBucket:"jumia-17681.appspot.com",messagingSenderId:"472156067665",appId:"1:472156067665:web:976495829b072466"},interval=setInterval((()=>{/loaded|complete/.test(document.readyState)&&(clearInterval(interval),Begin(config))}));